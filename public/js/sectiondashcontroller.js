'use strict';

angular.module('bundle').controller('newSection', function (Fire, $scope, $location, $state) {
	var vm = this;

	(function () {
		Fire.bunName($location.url(), function (snap) {
			//- Add a title to the bundle editor page
			vm.bName = snap.val();
			$scope.$apply();
			$state.href();
		});
	})(); //-fires immediately

	(function () {
		Fire.secName($location.url(), function (snap) {
			//- Repeat Section Names below input form
			vm.sName = snap.val();
			$scope.$apply();
		});
	})(); //=fires immediately

	vm.nSec = function () {
		Fire.newSec($location.url(), $scope.bundle.section); //- Giving a new section a new title
		console.log(Fire.sKey);
	};

	vm.nContext = function (id, titleContext, urlContext) {
		//- Adds a new title and bundle
		Fire.newCont($location.url(), id, titleContext, urlContext); //- passes MV data
		console.log('context posted');
	};

	vm.editSectionName = function (id, newName) {
		Fire.updateSecName($location.url(), id, newName);
		console.log('edited section name');
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9zZWN0aW9uZGFzaGNvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPLENBQ0wsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUVoQixVQUFVLENBQUMsWUFBWSxFQUFFLFVBQVUsSUFBSSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFO0FBQ3BFLEtBQUksRUFBRSxHQUFHLElBQUksQ0FBQzs7QUFFZCxFQUFDLFlBQVc7QUFDWCxNQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxVQUFTLElBQUksRUFBQzs7QUFDNUMsS0FBRSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDdEIsU0FBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ2hCLFNBQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQTtHQUNaLENBQUMsQ0FBQTtFQUNGLENBQUEsRUFBRyxDQUFDOztBQUVMLEVBQUMsWUFBVztBQUNYLE1BQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxFQUFFLFVBQVMsSUFBSSxFQUFDOztBQUM1QyxLQUFFLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUN0QixTQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7R0FDaEIsQ0FBQyxDQUFBO0VBQ0QsQ0FBQSxFQUFHLENBQUM7O0FBRUwsR0FBRSxDQUFDLElBQUksR0FBRyxZQUFZO0FBQ3JCLE1BQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDcEQsU0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7RUFDdEIsQ0FBQTs7QUFFRCxHQUFFLENBQUMsUUFBUSxHQUFHLFVBQVUsRUFBRSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUU7O0FBQ3JELE1BQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDNUQsU0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO0VBQzdCLENBQUE7O0FBRUQsR0FBRSxDQUFDLGVBQWUsR0FBRyxVQUFVLEVBQUUsRUFBRSxPQUFPLEVBQUU7QUFDM0MsTUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFBO0FBQ2hELFNBQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQTtFQUNsQyxDQUFBO0NBRUQsQ0FBQyxDQUFDIiwiZmlsZSI6InNyYy9qcy9zZWN0aW9uZGFzaGNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG5cdC5tb2R1bGUoJ2J1bmRsZScpXG5cblx0LmNvbnRyb2xsZXIoJ25ld1NlY3Rpb24nLCBmdW5jdGlvbiAoRmlyZSwgJHNjb3BlLCAkbG9jYXRpb24sICRzdGF0ZSkge1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHQoZnVuY3Rpb24oKSB7IFxuXHRcdFx0RmlyZS5idW5OYW1lKCRsb2NhdGlvbi51cmwoKSwgZnVuY3Rpb24oc25hcCl7IC8vLSBBZGQgYSB0aXRsZSB0byB0aGUgYnVuZGxlIGVkaXRvciBwYWdlXG5cdFx0XHR2bS5iTmFtZSA9IHNuYXAudmFsKCk7XG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0XHQkc3RhdGUuaHJlZigpXG5cdFx0XHR9KSBcblx0XHR9KSgpOyAvLy1maXJlcyBpbW1lZGlhdGVseVxuXG5cdFx0KGZ1bmN0aW9uKCkgeyBcblx0XHRcdEZpcmUuc2VjTmFtZSgkbG9jYXRpb24udXJsKCksIGZ1bmN0aW9uKHNuYXApeyAvLy0gUmVwZWF0IFNlY3Rpb24gTmFtZXMgYmVsb3cgaW5wdXQgZm9ybVxuXHRcdFx0dm0uc05hbWUgPSBzbmFwLnZhbCgpO1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH0pIFxuXHRcdH0pKCk7IC8vPWZpcmVzIGltbWVkaWF0ZWx5XG5cblx0XHR2bS5uU2VjID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0RmlyZS5uZXdTZWMoJGxvY2F0aW9uLnVybCgpLCAkc2NvcGUuYnVuZGxlLnNlY3Rpb24pOyAvLy0gR2l2aW5nIGEgbmV3IHNlY3Rpb24gYSBuZXcgdGl0bGVcblx0XHRcdGNvbnNvbGUubG9nKEZpcmUuc0tleSlcblx0XHR9XG5cblx0XHR2bS5uQ29udGV4dCA9IGZ1bmN0aW9uIChpZCwgdGl0bGVDb250ZXh0LCB1cmxDb250ZXh0KSB7IC8vLSBBZGRzIGEgbmV3IHRpdGxlIGFuZCBidW5kbGVcblx0XHRcdEZpcmUubmV3Q29udCgkbG9jYXRpb24udXJsKCksIGlkLCB0aXRsZUNvbnRleHQsIHVybENvbnRleHQpOyAvLy0gcGFzc2VzIE1WIGRhdGEgXG5cdFx0XHRjb25zb2xlLmxvZygnY29udGV4dCBwb3N0ZWQnKVxuXHRcdH1cblxuXHRcdHZtLmVkaXRTZWN0aW9uTmFtZSA9IGZ1bmN0aW9uIChpZCwgbmV3TmFtZSkge1xuXHRcdFx0RmlyZS51cGRhdGVTZWNOYW1lKCRsb2NhdGlvbi51cmwoKSwgaWQsIG5ld05hbWUpXG5cdFx0XHRjb25zb2xlLmxvZygnZWRpdGVkIHNlY3Rpb24gbmFtZScpXG5cdFx0fVxuXG5cdH0pOyJdfQ==
